---
pagetitle: "Lesson 12"
title: "While Loop in R (with Examples)"
editor_options:
  chunk_output_type: inline
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  fig.align = "center",
  message = FALSE,
  warning = FALSE
)
```

# While loop {#buttons .tabset .tabset-fade .tabset-pills}

A loop repeats a block of code until a stopping condition is met. A `while` loop keeps running **as long as** its condition evaluates to `TRUE`.

```{r, eval=FALSE}
while (condition) {
  # expressions
}
```

<p align="center">
![While Loop Flow Chart](imgblock12/img1.png)
</p>

**Important:** Always ensure the loop has a clear stopping condition; otherwise it may run forever.

## Example 1: Count from 1 to 10

This example increments a counter by 1 at each iteration and stops when it reaches 10.

```{r}
i <- 1

while (i <= 10) {
  cat("This is loop number", i, "\n")
  i <- i + 1
}
```

Notes:
- `cat()` is convenient for printing multiple values in one line and controlling newlines with `"\n"`.
- Avoid mixing `cat()` and `print()` unless there is a specific reason; it usually makes the output noisier.

## Example 2: Simulate a stock price until it triggers a rule

Suppose a stock starts at 50. At each step, the price changes by an integer amount between -10 and +10. If the price drops below (or equal to) 45, we “short” it and stop the loop.

```{r}
set.seed(123)  # makes random draws reproducible [2]

stock <- 50
price <- stock
n_iter <- 0

while (price > 45) {
  price <- stock + sample(-10:10, size = 1)
  n_iter <- n_iter + 1
  cat("Iteration:", n_iter, "- price:", price, "\n")
}

cat(
  "It took", n_iter, "iterations before we shorted.",
  "Final price:", price, "\n"
)
```
