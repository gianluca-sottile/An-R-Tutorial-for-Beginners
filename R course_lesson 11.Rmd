---
pagetitle: "Lesson 11"
title: "For Loops in R (Examples with Vectors, Lists, and Matrices)"
editor_options:
  chunk_output_type: inline
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  fig.align = "center",
  message = FALSE,
  warning = FALSE
)
```

# For loop syntax and examples {#buttons .tabset .tabset-fade .tabset-pills}

A `for` loop runs a block of code once for each element in a sequence. [web:735]

```{r, eval=FALSE}
for (i in vector) {
  # expressions
}
```

<p align="center">
![](imgblock11/img1.png)
</p>

## Example 1: Loop over a character vector

This example prints each element of a vector.

```{r}
fruit <- c("Apple", "Orange", "Passion fruit", "Banana")

for (x in fruit) {
  print(x)
}
```

## Example 2: Build a list (pre-allocate)

Avoid using `list` as a variable name because it masks the base `list()` function.
Also, itâ€™s good practice to pre-allocate containers in loops. [web:742]

```{r}
out <- vector("list", length = 4)

for (i in seq_along(out)) {
  out[[i]] <- i^2
}

out
```

Notes:
- `seq_along(x)` is safer than `1:length(x)` because it behaves correctly when `x` is empty. [web:742]
- `i^2` is clearer than `i*i`.

# For loop over a list

Looping over a list is similar to looping over a vector: the loop variable receives each element of the list.

```{r}
basket <- list(
  Basket = c("Apple", "Orange", "Passion fruit", "Banana"),
  Money = c(10, 12, 15),
  Purchase = FALSE
)

for (item in basket) {
  print(item)
}
```

If you need both names and values, iterate over `names()`:

```{r}
for (nm in names(basket)) {
  cat(nm, ":", "\n")
  print(basket[[nm]])
}
```

# For loop over a matrix

A matrix has rows and columns, so nested loops are common. [web:735]

```{r}
mat <- matrix(seq(10, 21, by = 1), nrow = 6, ncol = 2)

for (r in seq_len(nrow(mat))) {
  for (c in seq_len(ncol(mat))) {
    cat("Row", r, "and column", c, "has value", mat[r, c], "\n")
  }
}
```

Notes:
- `seq_len(n)` is a safe way to generate `1:n`-style sequences (it works well even when `n` can be 0).
- `cat()` produces cleaner console output than `print(paste(...))` for simple messages.
```

