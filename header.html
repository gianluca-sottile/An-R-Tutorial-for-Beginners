<!-- header.html per R Markdown website: solo script, senza <html>/<head>/<body> -->

<!-- Smooth scroll a sezioni con navbar fissa (offset ~65px) -->
<script>
(function (document, history, location) {
  var HISTORY_SUPPORT = !!(history && history.pushState);

  var anchorScrolls = {
    ANCHOR_REGEX: /^#[^ ]+$/,
    OFFSET_HEIGHT_PX: 65,

    init: function () {
      this.scrollToCurrent();
      $(window).on("hashchange", $.proxy(this, "scrollToCurrent"));
      $("body").on("click", "a", $.proxy(this, "delegateAnchors"));
    },

    getFixedOffset: function () {
      return this.OFFSET_HEIGHT_PX;
    },

    scrollIfAnchor: function (href, pushToHistory) {
      if (!this.ANCHOR_REGEX.test(href)) {
        return false;
      }

      var match = document.getElementById(href.slice(1));
      if (match) {
        var anchorOffset = $(match).offset().top - this.getFixedOffset();
        $("html, body").animate({ scrollTop: anchorOffset });

        if (HISTORY_SUPPORT && pushToHistory) {
          history.pushState({}, document.title, location.pathname + href);
        }
      }
      return !!match;
    },

    scrollToCurrent: function (e) {
      if (this.scrollIfAnchor(window.location.hash) && e) {
        e.preventDefault();
      }
    },

    delegateAnchors: function (e) {
      var elem = e.target;
      // salta se non c'Ã¨ href (es. <span>, icone, ecc.)
      var href = elem.getAttribute && elem.getAttribute("href");
      if (href && this.scrollIfAnchor(href, true)) {
        e.preventDefault();
      }
    }
  };

  $(document).ready($.proxy(anchorScrolls, "init"));
})(window.document, window.history, window.location);
</script>

<!-- Evita lo scroll verso l'alto quando clicchi tab/pill delle lezioni -->
<script>
$(function () {
  $(document).on("click", "a[data-toggle='tab'], a[data-toggle='pill']", function (e) {
    var scrollmem = $(window).scrollTop();
    e.preventDefault();
    $(this).tab("show");
    $(window).scrollTop(scrollmem);
  });
});
</script>
